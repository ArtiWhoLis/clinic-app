<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="theme-switcher" id="theme-switcher">☀️</div>
    <div class="main-container">
        <button class="back-arrow" id="admin-back-arrow" title="Назад">&#8592;</button>
        <h1 class="main-title">Админ-панель</h1>
        <div id="admin-login">
            <form id="admin-login-form" class="modern-form">
                <div class="form-group">
                    <input type="text" id="admin-username" class="form-input" placeholder=" " required>
                    <label for="admin-username" class="form-label">Логин</label>
                </div>
                <div class="form-group">
                    <input type="password" id="admin-password" class="form-input" placeholder=" " required>
                    <label for="admin-password" class="form-label">Пароль</label>
                </div>
                <button id="admin-login-btn" type="submit" class="role-btn">Войти</button>
            </form>
            <div id="admin-login-result"></div>
        </div>
        <div id="admin-panel">
            <div id="doctor-management">
                <h3>Управление врачами</h3>
                <form id="add-doctor-form" class="modern-form add-doctor-form">
                    <div class="form-group grow">
                        <input type="text" id="new-doctor-name" class="form-input" placeholder=" " required pattern="[А-Яа-яA-Za-zЁё.\s]+" maxlength="40" title="Только буквы, точки и пробелы, максимум 40 символов">
                        <label for="new-doctor-name" class="form-label">ФИО врача</label>
                    </div>
                    <div class="form-group grow">
                        <input type="text" id="new-doctor-specialty" class="form-input" placeholder=" " required>
                        <label for="new-doctor-specialty" class="form-label">Специальность</label>
                    </div>
                    <button type="submit" class="signup-btn add-btn">Добавить</button>
                </form>
            </div>
            
            <h3 id="admin-doctor-list-title">Выберите доктора для просмотра записей</h3>
            <div id="admin-doctor-list"></div>
            <div id="admin-appointments"></div>
            <button class="role-btn back-btn" id="admin-logout-btn">Выйти</button>
            <button class="role-btn" id="show-logs-btn">Логи</button>
        </div>
        <div id="doctor-profile-modal" class="modal-bg">
            <div class="modal modal-narrow">
                <h2>Профиль врача</h2>
                <div id="doctor-profile-info"></div>
                <form id="doctor-credentials-form" class="modern-form modal-form">
                    <div class="form-group">
                        <input type="text" id="doctor-username" class="form-input" placeholder=" ">
                        <label for="doctor-username" class="form-label">Логин</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="doctor-password" class="form-input" placeholder=" ">
                        <label for="doctor-password" class="form-label">Пароль</label>
                    </div>
                    <button type="submit" class="signup-btn">Сохранить</button>
                </form>
                <button id="doctor-profile-close" class="role-btn back-btn modal-btn">Закрыть</button>
                <button id="doctor-profile-view-apps" class="role-btn modal-btn blue-btn">Посмотреть записи</button>
                <div id="doctor-profile-result" class="modal-result"></div>
            </div>
        </div>
        <!-- Модалка редактирования врача -->
        <div id="edit-doctor-modal" class="modal-bg">
            <div class="modal modal-narrow">
                <h2>Редактировать врача</h2>
                <form id="edit-doctor-form" class="modern-form modal-form">
                    <div class="form-group">
                        <input type="text" id="edit-doctor-name" class="form-input" placeholder=" " required pattern="[А-Яа-яA-Za-zЁё.\s]+" maxlength="40" title="Только буквы, точки и пробелы, максимум 40 символов">
                        <label for="edit-doctor-name" class="form-label">ФИО врача</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="edit-doctor-specialty" class="form-input" placeholder=" " required maxlength="40">
                        <label for="edit-doctor-specialty" class="form-label">Специальность</label>
                    </div>
                    <div class="form-group">
                        <input type="text" id="edit-doctor-username" class="form-input" placeholder=" ">
                        <label for="edit-doctor-username" class="form-label">Логин</label>
                    </div>
                    <button type="submit" class="signup-btn">Сохранить</button>
                    <button type="button" id="edit-doctor-cancel" class="role-btn back-btn modal-btn">Отмена</button>
                    <div id="edit-doctor-result" class="modal-result"></div>
                </form>
            </div>
        </div>
        <!-- Модалка подтверждения -->
        <div id="confirm-modal" class="modal-bg">
            <div class="modal modal-confirm">
                <div id="confirm-modal-text" class="modal-confirm-text"></div>
                <button id="confirm-yes" class="signup-btn modal-half">Да</button>
                <button id="confirm-no" class="role-btn back-btn modal-half">Нет</button>
            </div>
        </div>
        <!-- Модалка логов -->
        <div id="logs-modal" class="modal-bg">
            <div class="modal modal-wide">
                <h2 class="modal-title">Логи действий</h2>
                <div class="modal-filter">
                    <label for="logs-filter">Фильтр:</label>
                    <select id="logs-filter">
                        <option value="">Все</option>
                        <option value="admin_login">Вход (админ)</option>
                        <option value="doctor_login">Вход (врач)</option>
                        <option value="add_doctor">Добавление врача</option>
                        <option value="delete_doctor">Удаление врача</option>
                        <option value="add_appointment">Запись к врачу</option>
                        <option value="delete_appointment">Отмена/удаление записи</option>
                        <option value="admin_login_fail">Ошибка входа (админ)</option>
                        <option value="doctor_login_fail">Ошибка входа (врач)</option>
                        <option value="login_blocked">Блокировка входа</option>
                    </select>
                </div>
                <div id="logs-table-container">
                    <table class="doctor-table" id="logs-table">
                        <thead>
                            <tr>
                                <th>Время</th>
                                <th>Действие</th>
                                <th>Пользователь</th>
                                <th>Детали</th>
                            </tr>
                        </thead>
                        <tbody id="logs-table-body"></tbody>
                    </table>
                </div>
                <button class="role-btn back-btn modal-btn" id="logs-close-btn">Закрыть</button>
            </div>
        </div>
        <!-- Модалка подробностей лога -->
        <div id="log-details-modal" class="modal-bg">
          <div class="modal modal-details">
            <h2 class="modal-title">Детали лога</h2>
            <div id="log-details-content" class="modal-details-content"></div>
            <button class="role-btn back-btn modal-btn" id="log-details-close">Закрыть</button>
          </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>